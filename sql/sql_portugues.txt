/*
SQL do sistema SGP!
*/


drop table if exists processo_movimentacao;
drop table if exists processo;
drop table if exists movimentacao;
drop table if exists funcionario;
drop table if exists assunto;
drop table if exists departamento;
drop table if exists usuario;

-- employee acho que a tabela deve ser no plural no caso employees
create table funcionario (
    id bigint not null auto_increment,
    ativo boolean, -- active
    nome varchar(100),
    rg varchar(11) unique, -- rg
    cpf varchar(14) unique, -- cfg
    primary key(id)
);

-- Subjects
create table assunto (
    id bigint not null auto_increment,
    ativo boolean, -- active
    descricao varchar(255) unique, -- description
    constante boolean, -- contant
    primary key(id)
);

-- departents
create table departamento (
    id bigint not null auto_increment,
    ativo boolean, -- active
    descricao varchar(100) unique, -- name
    constante boolean, -- contant
    primary key(id)
);

-- process
create table processo (
    id bigint not null auto_increment,
    ativo boolean, -- active
    numero_processo varchar(30), -- process_numver
    assunto_id bigint not null, -- subject_id
    funcionario_id bigint not null, -- employee_id
    departamento_id bigint not null, -- department_id
    primary key(id),
    foreign key (assunto_id) references assunto(id),
    foreign key (departamento_id) references departamento(id),
    foreign key (funcionario_id) references funcionario(id)        
);

-- transactions
create table movimentacao (
    id bigint not null auto_increment,
    ativo boolean, -- active
    nome varchar(100), -- name
    constante boolean, -- contant
    primary key(id)
);

create table processo_movimentacao (
    id bigint not null auto_increment,
    processo_id bigint not null,
    movimentacao_id bigint not null,
    primary key(id),
    foreign key (movimentacao_id) references movimentacao(id),
    foreign key (processo_id) references processo(id)
);

create table usuario (
    id bigint not null auto_increment,
    login varchar(20),
    senha varchar(100),
    primary key (id)    
);


/*
    Adicionando os tipos de assuntos.
*/
insert into assunto(descricao, constante) values ("ABONO DE PERMANÊNCIA", true);
insert into assunto(descricao, constante) values ("LICENÇA PRÊMIO POR ASSIDUIDADE", true);
insert into assunto(descricao, constante) values ("LICENÇA POR INTERESSE PARTICULAR", true);
insert into assunto(descricao, constante) values ("PROGRESSÃO FUNCIONAL", true);
insert into assunto(descricao, constante) values ("FERIAS", true);
insert into assunto(descricao, constante) values ("APOSENTADORIA", true);
insert into assunto(descricao, constante) values ("LICENÇA MATERNIDADE", true);
insert into assunto(descricao, constante) values ("INCORPORAÇÃO DE VANTAGEM TRANSITÓIA", true);
insert into assunto(descricao, constante) values (descricao, constante) values (true, "ABONO DE PERMANÊNCIA", true);"HORÁRIO ESPECIAL DE TRABALHO", true);
insert into assunto(descricao, constante) values ("ADICIONAL", true);

/*
        Adicionando os tipos de lugares que os processos poderão estar.
*/
insert into departamento(descricao, constante) values ("RECURSOS HUMANOS", true);
insert into departamento(descricao, constante) values ("SEC. DE ADM. E DE TRIBUTAÇÃO", true);
insert into departamento(descricao, constante) values ("PROCURADORIA", true);


/*
        Adicionando os tipos de movimentações
*/
insert into movimentacao(descricao, constante) values ("AGUARDANDO PARECER JURÍDICO", true);
insert into movimentacao(descricao, constante) values ("AGUARDANDO MANIFESTAÇÃO DA SECRETARIA RESPONSÁVEL", true);
insert into movimentacao(descricao, constante) values ("AGUARDANDO DOCUMENTAÇÃO DO REQUERENTE", true);
insert into movimentacao(descricao, constante) values ("REQUERIMENTO DEFERIDO", true);
insert into movimentacao(descricao, constante) values ("REQUERIMENTO INDEFERIDO", true);
insert into movimentacao(descricao, constante) values ("AGUARDANDO INTIMAÇÃO DO REQUERENTE", true);
insert into movimentacao(descricao, constante) values ("PARA ARQUIVAR", true);
